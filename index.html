<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عرض الصور والفيديوهات مثل تيك توك</title>
    
    <!-- 🔥 تحميل Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: white;
            overflow: hidden;
        }
        .container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
        }
        .media-item {
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            scroll-snap-align: start;
            position: relative;
        }
        img, video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>

    <div class="container" id="media-container"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // 🔥 تهيئة Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyA7A8HeARDtTtwfroAqYfBS5HHB-6wQcKs",
                authDomain: "absi-858f2.firebaseapp.com",
                projectId: "absi-858f2",
                storageBucket: "absi-858f2.appspot.com",
                messagingSenderId: "your-messaging-sender-id",
                appId: "1:1015328072446:android:8a5562a69fe7caf342fbaf"
            };

            // ⏳ بدء Firebase
            firebase.initializeApp(firebaseConfig);
            const storage = firebase.storage();
            const mediaContainer = document.getElementById("media-container");

            // 📥 تحميل الصور والفيديوهات
            function loadMedia() {
                const folders = ["images", "videos"];
                
                folders.forEach(folder => {
                    const storageRef = storage.ref(folder);
                    storageRef.listAll().then(result => {
                        result.items.forEach(fileRef => {
                            fileRef.getDownloadURL().then(url => {
                                const mediaItem = document.createElement("div");
                                mediaItem.classList.add("media-item");
                                
                                if (folder === "images") {
                                    const img = document.createElement("img");
                                    img.src = url;
                                    mediaItem.appendChild(img);
                                } else {
                                    const video = document.createElement("video");
                                    video.src = url;
                                    video.loop = true;
                                    video.muted = false;
                                    mediaItem.appendChild(video);
                                }
                                mediaContainer.appendChild(mediaItem);
                            });
                        });
                    }).catch(error => console.error("❌ خطأ في جلب الملفات:", error));
                });
            }

            loadMedia();

            // 🎥 تشغيل الفيديو عند الظهور في الشاشة
            function handleMediaVisibility() {
                const mediaItems = document.querySelectorAll(".media-item video");

                mediaItems.forEach(video => {
                    const rect = video.getBoundingClientRect();
                    if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
                        video.play();
                    } else {
                        video.pause();
                    }
                });
            }

            document.addEventListener("scroll", handleMediaVisibility);
        });
    </script>

</body>
</html>